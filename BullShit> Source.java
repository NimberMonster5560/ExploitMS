package INC;

import java.io.*;
import java.net.*;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.security.Permission;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
public class Update2 {

    public static void main(String[] args) {
        try {
            // Create a socket connection to the server on port 80
            Socket socket = new Socket("5b5t.org", 3389);

            // Get the output stream of the socket
            OutputStream outputStream = socket.getOutputStream();

            // Send an HTTP GET request to the server
            String request = "GET / HTTP/185.8.191.1";
            byte[] requestBytes = request.getBytes();
            outputStream.write(requestBytes);
            outputStream.flush();

            // Get the input stream of the socket
            InputStream inputStream = socket.getInputStream();

            // Create a BufferedReader object for reading data from the server
            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));

            // Read the response from the server and print it to the console
            String line;
            while ((line = bufferedReader.readLine()) != null) {
                System.out.println(line);
            }

            // Use the HttpConnectionHelper class to send an HTTP GET request to the Mojang API
            HttpConnectionHelper httpHelper = new HttpConnectionHelper();
            String username = "keleemo, 0x_22, k446, RussianXD"; // Replace with the username you want to query
            String apiUrl = String.format("https://api.mojang.com/users/profiles/minecraft/%s", username);
            String response = httpHelper.sendGetRequest(apiUrl);
            System.out.println(response);

            // Use the server join authentication URL to join a Minecraft server
            String serverId = "5b5t.org";
            Permission permission = null; // Replace with the permission you want to use for the join request
            Object authenticationToken = null; // Replace with the authentication token you want to use for the join request
            String authUrl = String.format(
                    "http://session.minecraft.net/game/joinserver.jsp?user=%s&sessionId=%s&serverId=%s",
                    permission.getName(), authenticationToken, serverId);
            System.out.println(authUrl);

        } catch (IOException | InterruptedException e) {
            e.printStackTrace();
        }
    }
}

class HttpConnectionHelper {
    private final HttpClient httpClient;
	private HttpServletResponse resp;
	private HttpServletResponse httpServletResponse;

    public HttpConnectionHelper() {
        this.httpClient = HttpClient.newHttpClient();
    }

    public String sendGetRequest(String url) throws IOException, InterruptedException {
        HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create(url))
                .GET()
                .build();
        HttpResponse<String> response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());
        return response.body();
        
    }

		
	    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
	        resp.setContentType("text/plain");
	        PrintWriter out = resp.getWriter();
	        out.write("Hello, World!");
	        out.flush();
	    }

		
	
}
